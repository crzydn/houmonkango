<!DOCTYPE html>
<html lang="ja">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TQ4Q6V86JC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TQ4Q6V86JC');
</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>大阪市西成区の精神科訪問看護なら いわき訪問看護ステーション</title>
  <meta name="description" content="大阪市西成区で24時間対応の精神科訪問看護ステーション。仕事帰りの傾聴サポートから生活保護申請まで専門看護師が寄り添います。" />
  <!-- OGP -->
  <meta property="og:title" content="大阪市西成区の精神科訪問看護なら いわき訪問看護ステーション" />
  <meta property="og:description" content="精神科訪問看護を通じて、心に寄り添うサポートを行います。24時間365日対応可能。" />
  <meta property="og:image" content="iwaki-logo.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://crzydn.github.io/iwaki-houmonkango/" />

  <!-- Font Awesome（integrityを削除して確実に読み込む） -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">

<style>
/* ===== 基本 ===== */
html { scroll-behavior: smooth; font-size: 16px; }
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Hiragino Sans','Noto Sans JP',sans-serif; background: #eef4f7; color: #222; line-height: 1.6; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
a { text-decoration: none; color: inherit; }
.container { width: 100%; max-width: 1024px; margin: auto; padding: 0 1rem; }

/* ===== ヘッダー ===== */
header { position: sticky; top: 0; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.08); z-index: 2000; }
.header-inner {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 1rem;
  justify-content: space-between;
}
.logo { display:flex; align-items:center; flex:0 0 auto; }
.logo img { height: 48px; width: auto; display:block; }

/* nav layout: desktop */
nav { flex: 1 1 auto; display:flex; justify-content:flex-end; align-items:center; }
nav ul { display:flex; gap:1rem; align-items:center; margin:0; padding:0; list-style:none; white-space:nowrap; }
nav li { list-style:none; }
nav a { font-size:0.95rem; padding:0.35rem 0.6rem; display:inline-block; line-height:1; transition: color 0.18s ease; }
nav a:hover, nav a:focus { color:#2b8f6e; outline:none; }

.header-btn {
  background:#00c300;
  color:#fff;
  padding:0.45rem 0.9rem;
  border-radius:20px;
  font-weight:600;
  font-size:0.92rem;
  display:inline-flex;
  align-items:center;
  gap:0.5rem;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  white-space:nowrap;
}
.header-btn i { display:inline-block; font-size:1.05rem; }

/* ===== モバイルハンバーガー（新） ===== */
.nav-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.36);
  opacity: 0;
  transition: opacity .28s ease;
  z-index: 3100;
  touch-action: none;
}

.nav-overlay.visible {
  opacity: 1;
}

/* off-canvas nav */
.mobile-nav {
  position: fixed;
  top: 0;
  right: 0;
  height: 100vh;
  width: 320px;
  max-width: 86%;
  background: #fff;
  transform: translateX(110%); /* hidden */
  transition: transform .28s cubic-bezier(.2,.9,.2,1);
  z-index: 3200;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* 少なめの上余白で項目を上寄せに */
  padding: 18px 16px 20px 16px;
  box-shadow: -8px 0 26px rgba(0,0,0,0.08);
}

/* open */
.mobile-nav.open {
  transform: translateX(0);
}

/* close button inside nav (top-right) */
.mobile-nav .mobile-nav-close {
  background: transparent;
  border: none;
  font-size: 1.4rem;
  color: #333;
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 6px;
  cursor: pointer;
}

/* list */
.mobile-nav-list {
  list-style: none;
  margin: 0;
  padding: 0;
  /* 小さめの余白で上寄せ */
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.mobile-nav-list a {
  display: block;
  padding: 12px 10px;
  color: #214a3b;
  font-size: 1.05rem;
  border-radius: 8px;
}

.mobile-nav-list a:hover,
.mobile-nav-list a:focus {
  background: #f1f7f4;
  color: #1f7a63;
  outline: none;
}

/* header btn inside menu */
.mobile-nav-list .header-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  margin-top: 8px;
  background: #00c300;
  color: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

/* ensure nav toggle visible on mobile and positioned to right */
.nav-toggle {
  background: transparent;
  border: none;
  font-size: 1.4rem;
  cursor: pointer;
  color: #333;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  z-index: 3500;
}

/* prevent body scroll when nav open */
body.nav-open {
  overflow: hidden;
}

/* accessibility helper (screen-reader only) */
.sr-only {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* small tweak for very small screens */
@media (max-width: 360px) {
  .mobile-nav { width: 86%; }
  .mobile-nav-list a { font-size: 1rem; padding: 10px; }
}

/* ===== ヒーロー ===== */
.hero { position: relative; background: url('https://example.com/hero.jpg') center/cover no-repeat; text-align: center; color: #fff; padding: calc(2.5rem + 64px) 1rem 2rem; }
.hero::after { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.48); }
.hero .content { position: relative; z-index: 1; max-width: 840px; margin: auto; }
.hero h1 { font-size: 1.9rem; margin-bottom: 0.8rem; line-height: 1.22; }
.hero p { font-size: 1rem; margin-bottom: 1.2rem; color: rgba(255,255,255,0.95); }
.btn-primary { background: #fff; color: #2b8f6e; padding: 0.8rem 1.4rem; border-radius: 20px; font-weight: 600; font-size: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.12); transition: transform 0.18s ease; display:inline-flex; align-items:center; gap:0.5rem; }
.btn-primary:hover { transform: translateY(-3px); }

/* ===== セクション共通 ===== */
.section { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin: 1.5rem 0; padding: 1.5rem; }
.section h2 { font-size: 1.4rem; color: #2b8f6e; margin-bottom: 1rem; position: relative; }
.section h2::after { content: ''; display: block; width: 56px; height: 3px; background: #2b8f6e; border-radius: 2px; position: absolute; bottom: -8px; left: 0; }

/* ===== カード ===== */
.cards { display:flex; flex-wrap:wrap; gap:1rem; }
.card { flex: 1 1 calc(50% - 1rem); background:#fafafa; padding:1rem; border-radius:10px; box-shadow:0 1px 6px rgba(0,0,0,0.04); transition: transform .18s ease; min-width:220px; }
.card h3 { font-size:1.1rem; margin-bottom:0.5rem; display:flex; align-items:center; gap:0.5rem; }
.card p { font-size:0.95rem; color:#444; }
.cute-icon { font-size:1.6rem; color:#2b8f6e; margin-right:0.5rem; }
.card:hover, .card:focus-within { transform: translateY(-4px); background:#f7fffa; }

@media (max-width:680px) { .card { flex: 1 1 100%; } }

/* ===== 活動地域 ===== */
.region-map img { width:100%; height:auto; border-radius:8px; display:block; }
.region-list { display:flex; flex-wrap:wrap; gap:0.8rem; margin-top:1rem; }
.region-list li { background:#2b8f6e; color:#fff; padding:0.45rem 0.9rem; border-radius:6px; font-size:0.92rem; }

/* ===== ニュースティッカー ===== */
.news-ticker { background:#eef9f4; overflow:hidden; border-radius:8px; padding:0.35rem 0; }
.ticker { display:inline-block; white-space:nowrap; transform:translateX(0); will-change:transform; }
.ticker span { display:inline-block; padding:0.5rem 1.75rem; color:#214a3b; font-size:0.95rem; }

/* ===== ボタン ===== */
.btn-download { background: linear-gradient(135deg,#2b8f6e,#1f7a63); color:#fff; padding:0.6rem 1rem; border-radius:25px; font-size:0.95rem; display:inline-flex; gap:0.5rem; align-items:center; }
.btn-download:hover { transform: translateY(-3px); }

/* ===== テーブル（改善：モバイルで崩れないグリッド化） ===== */
.staff-card { background:#fff; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.05); padding:1rem; text-align:center; flex:1 1 calc(50% - 1rem); }
    .staff-card img { width:120px; height:120px; object-fit:cover; border-

radius:50%; margin-bottom:0.5rem; }
    .staff-card h3 { font-size:1.2rem; color:#4caf93; margin-bottom:0.3rem; }
    .staff-card p { font-size:0.95rem; line-height:1.4; }
    .table-responsive { overflow-x:auto; margin:1.5rem 0; }
    table { width:100%; border-collapse:collapse; }
    th, td { border:1px solid #ddd; padding:0.8rem; text-align:center; }
    th { background:#4caf93; color:#fff; }
    .badge-ok { background:#4caf93; color:#fff; padding:3px 6px; border-radius:4px; font-size:0.8rem; }

@media(max-width:768px){ .staff-card { flex:1 1 100%; } }

/* ===== バッジ ===== */
.badge-ok { background:#2b8f6e; color:#fff; padding:6px 10px; border-radius:8px; font-size:0.86rem; display:inline-block; }
.badge-consult { background:#ff9800; color:#fff; padding:6px 10px; border-radius:8px; font-size:0.86rem; display:inline-block; }

/* ===== モーダル ===== */
.modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:2000; padding:2rem 1rem; }
.modal[aria-hidden="false"] { display:block; }
.modal-content { background:#fff; margin:0 auto; padding:1rem; width:100%; max-width:840px; border-radius:10px; position:relative; box-shadow:0 12px 36px rgba(0,0,0,0.14); }
.modal-close { position:absolute; top:12px; right:12px; font-size:1.2rem; cursor:pointer; background:transparent; border:none; color:#666; padding:6px; border-radius:6px; }
.modal-close:focus { box-shadow:0 0 0 4px rgba(43,143,110,0.12); }
.modal-content iframe { width:100%; height:70vh; border:none; border-radius:6px; }

/* ===== 浮動LINEボタン ===== */
.floating-line { position:fixed; bottom:18px; right:18px; width:56px; height:56px; background:#00c300; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,0.12); z-index:1500; }
.floating-line a { color:#fff; font-size:1.4rem; display:inline-flex; align-items:center; justify-content:center; }

/* ===== フッター ===== */
footer { text-align:center; padding:1rem 0; background:#2b8f6e; color:#fff; font-size:0.85rem; }

/* ===== レスポンシブ微調整 ===== */
@media (max-width:480px) {
  .hero h1 { font-size:1.4rem; }
  .hero p { font-size:0.95rem; }
  .cards { gap:0.6rem; }
  .card { padding:0.9rem; border-radius:8px; }
  .region-list li { font-size:0.88rem; padding:0.35rem 0.6rem; }
  .btn-primary, .btn-download { width:100%; justify-content:center; }
}
</style>
</head>
<body>
  <!-- ===== 新しいヘッダー（置き換え） ===== -->
<header>
  <div class="container header-inner">
    <div class="logo">
      <a href="/"><img src="iwaki-logo.png" alt="いわき訪問看護ステーション ロゴ"></a>
    </div>

    <!-- ハンバーガーボタン（右） -->
    <button class="nav-toggle" aria-controls="mobile-nav" aria-expanded="false" aria-label="メニュー">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </button>
  </div>
</header>

<!-- オーバーレイ（メニュー開時の背景） -->
<div id="navOverlay" class="nav-overlay" hidden aria-hidden="true"></div>

<!-- オフキャンバスナビ（右側スライド） -->
<nav id="mobile-nav" class="mobile-nav" aria-hidden="true" aria-label="モバイルメニュー">
  <button class="mobile-nav-close" aria-label="閉じるメニュー">
    <i class="fa fa-times" aria-hidden="true"></i>
  </button>

  <ul class="mobile-nav-list">
    <li><a href="#hero">ホーム</a></li>
    <li><a href="#services">サービス</a></li>
    <li><a href="#region">活動地域</a></li>
    <li><a href="#fees">料金表</a></li>
    <li><a href="#contracts">契約書</a></li>
    <li><a href="#staff">スタッフ対応</a></li>
    <li><a href="#contact" class="header-btn"><i class="fa-brands fa-line" aria-hidden="true"></i> 無料相談</a></li>
  </ul>
</nav>

  <!-- ヒーロー -->
  <section id="hero" class="hero">
    <div class="content container" role="region" aria-label="トップメッセージ">
      <h1>「今日も一人で頑張ったな…」<br>そんな夜を、<br>少しでも安心に包みたい。</h1>
      <p>大阪市西成区で仕事帰りの“聴き手”や、生活保護支援を求めるあなたへ。専門の精神科看護師が、誰にも話せない心の声に寄り添います。</p>
      <a href="#contact" class="btn-primary"><i class="fa-brands fa-line" aria-hidden="true"></i> 無料相談</a>
      <div class="hero-small">LINE・電話・メールでお気軽にどうぞ</div>
    </div>
  </section>

  <main class="container" id="content">
    <!-- ... (以下は既存の各セクションを省略せずそのまま配置してください) ... -->

    <!-- Services -->
    <section id="services" class="section" aria-labelledby="services-title">
      <h2 id="services-title"><i class="fa-solid fa-brain" aria-hidden="true"></i> 精神科訪問看護でできること</h2>
      <div class="cards">
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-headset cute-icon" aria-hidden="true"></i> 傾聴サポート</h3>
          <p>仕事帰りの疲れや孤独感、何でもお気軽にお話しください。</p>
        </div>
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-heart-pulse cute-icon" aria-hidden="true"></i> メンタルヘルスチェック</h3>
          <p>不安や抑うつ状態を定期的に確認し、早期対応を行います。</p>
        </div>
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-pills cute-icon" aria-hidden="true"></i> 服薬管理</h3>
          <p>お薬の飲み忘れを防ぎ、安心して治療を継続できるようサポート。</p>
          <span class="badge-ok" aria-hidden="true">守秘義務厳守</span>
        </div>
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-triangle-exclamation cute-icon" aria-hidden="true"></i> 緊急対応</h3>
          <p>急な不調時には迅速に対応し、安全を確保します。</p>
          <span class="badge-consult" aria-hidden="true">24時間対応</span>
        </div>
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-person-walking-arrow-loop-left cute-icon" aria-hidden="true"></i> セルフケア指導</h3>
          <p>簡単な呼吸法やリラクゼーション技法をお伝えします。</p>
        </div>
        <div class="card" tabindex="0">
          <h3><i class="fa-solid fa-file-circle-check cute-icon" aria-hidden="true"></i> 生活保護申請サポート</h3>
          <p>申請手続きを一緒に整理し、不安を軽減します。</p>
          <span class="badge-ok" aria-hidden="true">無料相談</span>
        </div>
      </div>
      <p style="text-align:right; margin-top:1rem;"><a href="services-detail.html" class="btn-primary">詳しく見る →</a></p>
    </section>

    <!-- Region -->
    <section id="region" class="section">
      <h2><i class="fa-solid fa-map-location-dot" aria-hidden="true"></i> 活動地域</h2>
      <div class="region-map">
        <img src="osakamap.jpg" alt="大阪市の地図">
      </div>
      <ul class="region-list">
        <li>西成区</li>
        <li>浪速区</li>
        <li>阿倍野区</li>
        <li>住吉区</li>
        <li>平野区</li>
        <li>住之江区</li>
      </ul>
      <p style="text-align:right; margin-top:1rem;"><a href="region-detail.html" class="btn-primary">詳しく見る →</a></p>
    </section>

    <!-- News -->
    <section id="news" class="section">
      <h2><i class="fa-solid fa-newspaper" aria-hidden="true"></i> おしらせ</h2>
      <div class="news-ticker">
        <div class="ticker">
          <span>2025.07.09 テスト中です。</span>
          <span>2025.03.30 LINE対応開始しました。</span>
          <span>2025.01.10 看護記録開示公開しました。</span>
        </div>
      </div>
    </section>

    <!-- Fees -->
    <section id="fees" class="section">
      <h2><i class="fa-solid fa-file-invoice-dollar" aria-hidden="true"></i> 料金表</h2>
      <button class="btn-download" onclick="openModal('modal-fees')"><i class="fa-solid fa-file-pdf" aria-hidden="true"></i> PDFを見る</button>
      <p style="text-align:right; margin-top:1rem;"><a href="fees-detail.html" class="btn-primary">詳しく見る →</a></p>
    </section>

    <!-- Contracts -->
    <section id="contracts" class="section">
      <h2><i class="fa-solid fa-file-contract" aria-hidden="true"></i> 契約書</h2>
      <button class="btn-download" onclick="openModal('modal-contracts')"><i class="fa-solid fa-file-contract" aria-hidden="true"></i> PDFを見る</button>
      <p style="text-align:right; margin-top:1rem;"><a href="contracts-detail.html" class="btn-primary">詳しく見る →</a></p>
    </section>

    <!-- Staff -->
    <section id="staff" class="section">
      <h2><i class="fa-solid fa-user-nurse" aria-hidden="true"></i> スタッフ訪問対応</h2>
     <div class="table-responsive">
        <table>
          <thead><tr><th>時間帯</th><th>男性看護師</th><th>女性看護師</th></tr></thead>
          <tbody>
            <tr><td data-label="時間帯">08:00〜12:00</td><td data-label="男性"><span class="badge-ok">対応可</span></td><td data-label="女性"><span class="badge-ok">対応可</span></td></tr>
            <tr><td>12:00〜16:00</td><td><span class="badge-ok">対応可</span></td><td><span class="badge-ok">対応可</span></td></tr>
            <tr><td>16:00〜20:00</td><td><span class="badge-ok">対応可</span></td><td><span class="badge-consult">要相談</span></td></tr>
            <tr><td>20:00〜24:00</td><td><span class="badge-consult">要相談</span></td><td><span class="badge-ok">

対応可</span></td></tr>
          </tbody>
        </table>
      </div>
      <p style="text-align:right; margin-top:1rem;"><a href="staff-detail.html" class="btn-primary">詳しく見る →</a></p>
    </section>

    <!-- Contact -->
    <section id="contact" class="section">
      <h2><i class="fa-solid fa-comments" aria-hidden="true"></i> お問い合わせ</h2>
      <p>LINE・電話・メールで24時間受付中。ご相談ください。</p>
      <div style="margin-top:1rem;">
        <a href="https://lin.ee/mlItwhZB" class="btn-primary" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-line" aria-hidden="true"></i> LINEで相談</a>
      </div>
      <p style="margin-top:1rem; font-size:0.95rem;">
        <i class="fa-solid fa-phone" aria-hidden="true"></i> <a href="tel:06-XXXX-XXXX">06-XXXX-XXXX</a><br>
        <i class="fa-solid fa-envelope" aria-hidden="true"></i> <a href="mailto:info@example.com">info@example.com</a>
      </p>
    </section>

    <!-- SNS -->
    <section id="sns" class="section">
      <h2><i class="fa-solid fa-hashtag" aria-hidden="true"></i> 各種SNS</h2>
      <p>最新情報や日々の様子をSNSでも発信しています。ぜひフォローしてください。</p>
      <div class="cards">
        <div class="card" style="text-align:center;">
          <a href="https://lin.ee/mlItwhZB" target="_blank" rel="noopener noreferrer">
            <i class="fa-brands fa-line cute-icon" aria-hidden="true" style="font-size:2rem;"></i>
            <h3>LINE公式アカウント</h3>
            <p>チャットで気軽にご相談</p>
          </a>
        </div>
        <div class="card" style="text-align:center;">
          <a href="https://twitter.com/xxxxxxxx" target="_blank" rel="noopener noreferrer">
            <i class="fa-brands fa-x cute-icon" aria-hidden="true" style="font-size:2rem;"></i>
            <h3>X（旧Twitter）</h3>
            <p>最新のお知らせを配信</p>
          </a>
        </div>
        <div class="card" style="text-align:center;">
          <a href="https://www.instagram.com/iwaki_houmonkango" target="_blank" rel="noopener noreferrer">
            <i class="fa-brands fa-instagram cute-icon" aria-hidden="true" style="font-size:2rem;"></i>
            <h3>Instagram</h3>
            <p>活動風景や日常を写真で</p>
          </a>
        </div>
        <div class="card" style="text-align:center;">
          <a href="https://www.facebook.com/xxxxxxxx" target="_blank" rel="noopener noreferrer">
            <i class="fa-brands fa-facebook-f cute-icon" aria-hidden="true" style="font-size:2rem;"></i>
            <h3>Facebook</h3>
            <p>地域の方との交流や情報発信</p>
          </a>
        </div>
      </div>
    </section>

  <!-- Careers -->  
<section id="careers" class="section" aria-labelledby="careers-title">  
  <h2 id="careers-title"><i class="fa-solid fa-briefcase" aria-hidden="true"></i> 求人募集</h2>  
  <p>私たちと一緒に働きませんか？精神科訪問看護に興味のある看護師を募集しています。未経験OK・週1日〜勤務可。</p>  
  <ul style="list-style:disc; margin:0.8rem 0 1rem 1.2rem;">  
    <li>職種：正看護師／准看護師</li>  
    <li>雇用形態：常勤・非常勤</li>  
    <li>勤務地：大阪市西成区エリア</li>  
    <li>給与：経験・資格により応相談</li>  
    <li>待遇：交通費支給・社会保険完備（条件あり）</li>  
  </ul>  
  <p style="text-align:right;"><a href="recruit-detail.html" class="btn-primary">詳しく見る →</a></p>  
</section>  

<!-- Partners -->  
<section id="partners" class="section" aria-labelledby="partners-title">  
  <h2 id="partners-title"><i class="fa-solid fa-building" aria-hidden="true"></i> 関連会社</h2>  
  <p>当ステーションは以下の関連企業と連携し、包括的なケアを提供しています。</p>  
  <ul style="list-style:disc; margin:0.8rem 0 1rem 1.2rem;">  
    <li><a href="https://iwaki-corp.com/" target="_blank" rel="noopener noreferrer">株式会社岩希（訪問介護）</a></li>  
    <li><a href="#" target="_blank" rel="noopener noreferrer">合同会社○○ライフケア（福祉用具レンタル）</a></li>  
    <li><a href="#" target="_blank" rel="noopener noreferrer">社会福祉法人○○会（地域支援事業）</a></li>  
  </ul>  
  <p style="text-align:right;"><a href="related-detail.html" class="btn-primary">詳しく見る →</a></p>  
</section>
  </main>

  <!-- モーダル：料金 -->
  <div id="modal-fees" class="modal" role="dialog" aria-hidden="true" aria-modal="true" aria-labelledby="modal-fees-title">
    <div class="modal-content">
      <button class="modal-close" aria-label="閉じる" data-modal-close>&times;</button>
      <h3 id="modal-fees-title" style="margin:0 0 .6rem 0;">料金表（PDF）</h3>
      <iframe src="fees.pdf" title="料金表"></iframe>
    </div>
  </div>

  <!-- モーダル：契約書 -->
  <div id="modal-contracts" class="modal" role="dialog" aria-hidden="true" aria-modal="true" aria-labelledby="modal-contracts-title">
    <div class="modal-content">
      <button class="modal-close" aria-label="閉じる" data-modal-close>&times;</button>
      <h3 id="modal-contracts-title" style="margin:0 0 .6rem 0;">契約書（PDF）</h3>
      <iframe src="contracts.pdf" title="契約書"></iframe>
    </div>
  </div>

  <!-- 浮動LINEボタン -->
  <div class="floating-line" aria-hidden="true">
    <a href="https://lin.ee/mlItwhZB" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-line" aria-hidden="true"></i></a>
  </div>

  <footer>
    <small>&copy; 2025 いわき訪問看護ステーション</small>
  </footer>

 <script>
document.addEventListener('DOMContentLoaded', function () {
  try {
    /* ==========================
       === ハンバーガーメニュー（右スライド）===
       ※ 必須要素: .nav-toggle と nav 要素（推奨 id="mobile-nav"）
    ========================== */
    const navToggle = document.querySelector('.nav-toggle');
    const nav = document.getElementById('mobile-nav') || document.querySelector('nav');
    // オーバーレイを自動で作成（なければ）
    let overlay = document.getElementById('navOverlay');
    if (!overlay) {
      overlay = document.createElement('div');
      overlay.id = 'navOverlay';
      // 最低限のスタイル（ユーザーがCSSを追加していない場合でも動作するように）
      Object.assign(overlay.style, {
        position: 'fixed', inset: '0', background: 'rgba(0,0,0,0.38)',
        zIndex: '2500', display: 'none', transition: 'opacity .28s ease', opacity: '0'
      });
      document.body.appendChild(overlay);
    }

    function showOverlay() {
      overlay.style.display = 'block';
      // allow transition
      requestAnimationFrame(()=> overlay.style.opacity = '1');
    }
    function hideOverlay() {
      overlay.style.opacity = '0';
      setTimeout(()=> overlay.style.display = 'none', 300);
    }

    function openNav() {
      if (!nav) return;
      nav.classList.add('active', 'open');
      nav.setAttribute('aria-hidden', 'false');
      if (nav.style.right !== undefined) nav.style.right = '0';
      showOverlay();
      document.body.style.overflow = 'hidden';
      if (navToggle) navToggle.setAttribute('aria-expanded', 'true');
      // フォーカス移動
      const first = nav.querySelector('a, button, input, [tabindex]:not([tabindex="-1"])');
      if (first) setTimeout(()=> first.focus(), 120);
    }

    function closeNav() {
      if (!nav) return;
      nav.classList.remove('active', 'open');
      nav.setAttribute('aria-hidden', 'true');
      if (nav.style.right !== undefined) nav.style.right = ''; // CSS 側に戻す
      hideOverlay();
      document.body.style.overflow = '';
      if (navToggle) {
        navToggle.setAttribute('aria-expanded', 'false');
        navToggle.focus();
      }
    }

    if (navToggle && nav) {
      navToggle.addEventListener('click', function (e) {
        e.stopPropagation();
        if (nav.classList.contains('open')) closeNav(); else openNav();
      });
    }

    // クリックで閉じる（オーバーレイクリック）
    overlay.addEventListener('click', function () { closeNav(); });

    // メニュー内リンククリックで閉じる（モバイルUX）
    document.addEventListener('click', function (e) {
      if (!nav || !nav.classList.contains('open')) return;
      const link = e.target.closest('nav a');
      if (link) setTimeout(closeNav, 120); // ナビ遷移を阻害しない
    });

    // ESC で閉じる（ナビ or モーダルで共通）
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        if (nav && nav.classList.contains('open')) closeNav();
        // モーダルは下で処理
      }
    });

    /* ==========================
       === ニュースティッカー ===
       .news-ticker と .ticker を想定
    ========================== */
    (function initTicker(){
      const wrapper = document.querySelector('.news-ticker');
      const ticker = wrapper ? wrapper.querySelector('.ticker') : null;
      if (!wrapper || !ticker) return;

      // 内容が短い場合は複製して幅を確保
      function ensureWide() {
        const tw = ticker.scrollWidth;
        const ww = wrapper.clientWidth;
        if (tw < ww * 1.8 && ticker.childElementCount < 128) {
          ticker.innerHTML += ticker.innerHTML; // 複製
          // 再試行（微遅延）
          setTimeout(ensureWide, 40);
        }
      }
      ensureWide();

      let x = 0;
      const speed = 0.6; // px / frame, 必要なら調整
      let paused = false;

      function step() {
        if (paused) { requestAnimationFrame(step); return; }
        const tw = ticker.scrollWidth;
        const ww = wrapper.clientWidth;
        x -= speed;
        if (Math.abs(x) >= tw) x = 0;
        ticker.style.transform = `translateX(${x}px)`;
        requestAnimationFrame(step);
      }

      wrapper.addEventListener('mouseenter', ()=> paused = true);
      wrapper.addEventListener('mouseleave', ()=> paused = false);
      wrapper.addEventListener('touchstart', ()=> paused = true, {passive: true});
      wrapper.addEventListener('touchend', ()=> paused = false, {passive: true});

      requestAnimationFrame(step);
      // サイズ変化への対応
      window.addEventListener('resize', ()=> { x = 0; });
    })();

    /* ==========================
       === モーダル（openModal / closeModal）===
       .modal 要素、閉じるボタンは [data-modal-close] または .modal-close を想定
       openModal('id') が既に HTML の onclick で使われている想定
    ========================== */
    const FOCUSABLE_SELECTORS = 'a[href], button:not([disabled]), textarea, input:not([type="hidden"]), select, [tabindex]:not([tabindex="-1"])';
    const modals = Array.from(document.querySelectorAll('.modal'));
    const modalState = new Map(); // id -> { cleanup, previouslyFocused }

    function trapFocus(container) {
      const focusables = Array.from(container.querySelectorAll(FOCUSABLE_SELECTORS)).filter(el => el.offsetParent !== null);
      if (!focusables.length) return () => {};
      const first = focusables[0], last = focusables[focusables.length - 1];
      function handler(e) {
        if (e.key !== 'Tab') return;
        if (e.shiftKey) {
          if (document.activeElement === first) { e.preventDefault(); last.focus(); }
        } else {
          if (document.activeElement === last) { e.preventDefault(); first.focus(); }
        }
      }
      container.addEventListener('keydown', handler);
      return () => container.removeEventListener('keydown', handler);
    }

    window.openModal = function(id) {
      const el = document.getElementById(id);
      if (!el) { console.warn('openModal: modal not found', id); return; }
      // show
      el.setAttribute('aria-hidden', 'false');
      el.style.display = 'block';
      document.body.style.overflow = 'hidden';
      // focus
      const closeBtn = el.querySelector('[data-modal-close]') || el.querySelector('.modal-close') || el.querySelector('button, a');
      if (closeBtn) setTimeout(()=> closeBtn.focus(), 80);
      // trap focus
      const content = el.querySelector('.modal-content') || el;
      const cleanup = trapFocus(content);
      modalState.set(id, { cleanup, previouslyFocused: document.activeElement });
    };

    window.closeModal = function(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.setAttribute('aria-hidden', 'true');
      el.style.display = 'none';
      document.body.style.overflow = '';
      const state = modalState.get(id);
      if (state) {
        try { state.cleanup(); } catch (e) {}
        if (state.previouslyFocused && state.previouslyFocused.focus) state.previouslyFocused.focus();
        modalState.delete(id);
      }
    };

    // ワイヤリング：閉じるボタン、背景クリック
    document.addEventListener('click', function(e){
      // close buttons
      if (e.target.closest('[data-modal-close]') || e.target.closest('.modal-close')) {
        const modal = e.target.closest('.modal');
        if (modal && modal.id) closeModal(modal.id);
        return;
      }
      // background click closes modal
      if (e.target.classList && e.target.classList.contains('modal')) {
        if (e.target.id) closeModal(e.target.id);
      }
    });

    // ESC closes any open modal (and nav handled above)
    document.addEventListener('keydown', function(e){
      if (e.key === 'Escape') {
        modals.forEach(m => {
          if (m.getAttribute('aria-hidden') === 'false') {
            if (m.id) closeModal(m.id);
          }
        });
      }
    });

    // 初期化: 全モーダルは aria-hidden=true にして display:none（なければ強制）
    modals.forEach(m => {
      if (m.getAttribute('aria-hidden') === null) m.setAttribute('aria-hidden', 'true');
      if (!m.style.display) m.style.display = (m.getAttribute('aria-hidden') === 'false') ? 'block' : 'none';
    });

    // もしページ内に古い nav スクリプトが残っている場合は console に注意喚起
    // (開発者が複数スクリプト混在させないように)
    // console.info('Unified UI script initialized.');

  } catch (err) {
    console.error('Unified UI script error:', err);
  }
});
</script>
</body>
</html>
